<html id="doc">
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
<div class="container">
    <div class="col-md-3">
        <h1>Elastidex</h1>
        <hr>
        <div class="row">
            <div class="col-md-10">
                <input class="form-control" type="text" placeholder="Enter search term here" id="searchTerms">
            </div>
            <hr>
            <div class="col-md-2">
                <button class="btn btn-primary" onclick="searchPokemon()">Search</button>
            </div>
        </div>
    </div>
    <div class="col-md-9">
        <table class="table table-hover">
            <thead>
            <tr>
                <th>#</th>
                <th>Name</th>
                <th>Type(s)</th>
                <th>Total Stats</th>
                <th>HP</th>
                <th>Legendary</th>
            </tr>
            </thead>
            <tbody>
            <% pokemon.forEach( poke => { %>
                <tr>
                    <td><%= poke['#'] %></td>
                    <td><%= poke.Name%></td>
                    <td><%= poke['Type 1']%> <%=poke['Type 2']%></td>
                    <td><%= poke.Total%></td>
                    <td><%= poke.HP%></td>
                    <td><%= poke.Legendary%></td>
                </tr>
            <% }) %>
            </tbody>
        </table>
    </div>
</div>
</body>
<script>
    function addQuery(e) {
        let term = e + " ''";
        document.getElementById('searchTerms').value += term;
    }
    function resultReturned(e){
        console.log(e.target.responseText);
        document.getElementById("doc").innerHTML = e.target.responseText;
    }

    function searchPokemon() {
        let request = new XMLHttpRequest();
        request.addEventListener("load", resultReturned);
        let data = new URLSearchParams();
        data.append("query", document.getElementById("searchTerms").value)
        request.open("POST", "http://localhost:9000/search");
        request.send(data);
    }
</script>
